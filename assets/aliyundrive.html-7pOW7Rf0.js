import{d as S,r,l as T,j as t,n as h,I as g,f as d,i as o,e as f,t as b,J as y,m as v,o as P}from"./app-DPl6UJDd.js";import{_ as A}from"./aliyundrive-CF7jp5n4.js";import{a as m}from"./index-CmmzNXUp.js";const _={class:"hint-container warning"},W=["disabled"],K={style:{margin:"4px"}},R=["src"],N={class:"hint-container info"},q={class:"hint-container-title"},D=S({__name:"aliyundrive.html",setup(Z){const a=r("获取 Token"),n=r(0),s=r(""),l=r(""),u=r(""),k=async()=>{a.value="等待...",n.value=1;const e=await(await fetch(`${m()}/alist/ali/qr`)).json();console.log(e),a.value="使用阿里云盘 APP 扫描然后点击",n.value=2,u.value=JSON.stringify({ck:e.content.data.ck,t:e.content.data.t.toString()}),s.value=`${m()}/qr/?size=400&text=${encodeURIComponent(e.content.data.codeContent)}`},x=async()=>{n.value=3,a.value="等待...";const e=await(await fetch(`${m()}/alist/ali/ck`,{method:"POST",headers:{"Content-Type":"application/json"},body:u.value})).json(),{content:{data:{qrCodeStatus:i,loginResult:p,bizExt:z}}}=e;if(p!=="success"){n.value=2,a.value="使用阿里云盘 App 扫描然后点击",alert("Status:"+i);return}const C=JSON.parse(atob(z));l.value=C.pds_login_result.refreshToken,a.value="获取 Token 成功",n.value=4,console.log(e)},w=async()=>{n.value===0&&k(),n.value===2&&x()};return(c,e)=>{const i=v("RouteLink"),p=v("Mermaid");return P(),T("div",null,[e[9]||(e[9]=t("h1",{id:"阿里云盘-分享",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#阿里云盘-分享"},[t("span",null,"阿里云盘 / 分享")])],-1)),t("div",_,[e[3]||(e[3]=t("p",{class:"hint-container-title"},"注意",-1)),t("p",null,[e[1]||(e[1]=o("不推荐使用该驱动，因为它不稳定，随时可能被屏蔽，我们会在以后的版本中移除。推荐使用官方 API 的驱动 ")),d(i,{to:"/zh/guide/drivers/aliyundrive_open.html"},{default:f(()=>e[0]||(e[0]=[o("Aliyundrive Open")])),_:1,__:[0]}),e[2]||(e[2]=o("。"))])]),e[10]||(e[10]=h('<div class="hint-container tip"><p class="hint-container-title">提示</p><p>由于阿里云盘 referer 的限制，必须使用移动端 token。 使用桌面 Web 令牌将导致无法下载和预览。<br> 当然，如果你在本地使用或者带宽足够大，你也可以开启代理，让桌面 Web 的 <code>refresh token</code> 正常工作。</p></div><h3 id="刷新令牌" tabindex="-1"><a class="header-anchor" href="#刷新令牌"><span><strong>刷新令牌</strong></span></a></h3><p>按照这个 <a href="https://github.com/Xhofe/alist/issues/88" target="_blank" rel="noopener noreferrer">issue</a> 在手机上捕获/查找日志（<code>/data/media/0/Android/data/com.alicloud.databox/files/logs/trace/</code>）。 或者您可以点击：</p>',3)),t("p",null,[t("button",{disabled:n.value===3||n.value===1,style:{outline:"none",padding:"12px",background:"#70c6be",border:"none","border-radius":"8px",cursor:"pointer","font-size":"20px"},onClick:w},[e[4]||(e[4]=t("br",null,null,-1)),o(" "+b(a.value),1),e[5]||(e[5]=t("br",null,null,-1))],8,W)]),g(t("div",K,[t("img",{src:s.value},null,8,R)],512),[[y,s.value]]),g(t("div",null,[t("div",N,[t("p",q,"Token: "+b(l.value),1)])],512),[[y,l.value]]),e[11]||(e[11]=h('<p><em>API is hosted on <a href="http://replit.com" target="_blank" rel="noopener noreferrer">replit.com</a></em></p><h3 id="根文件夹id" tabindex="-1"><a class="header-anchor" href="#根文件夹id"><span><strong>根文件夹ID</strong></span></a></h3><p>打开阿里云盘官网，点击进入要设置的文件夹时点击 URL 后面的字符串</p><p>如 <a href="https://www.alipan.com/drive/folder/5fe01e1830601baf774e4827a9fb8fb2b5bf7940" target="_blank" rel="noopener noreferrer">https://www.alipan.com/drive/folder/5fe01e1830601baf774e4827a9fb8fb2b5bf7940</a></p><p>这个文件夹的 file_id 即为 <code>5fe01e1830601baf774e4827a9fb8fb2b5bf7940</code>：</p><p><img src="'+A+'" alt="file_id" loading="lazy"></p><h3 id="秒传" tabindex="-1"><a class="header-anchor" href="#秒传"><span><strong>秒传</strong></span></a></h3><p>上传的时候校验 hash，如果云端有，直接生成文件，不消耗流量</p><h3 id="内部上传" tabindex="-1"><a class="header-anchor" href="#内部上传"><span><strong>内部上传</strong></span></a></h3><p>如果你部署 Alist 的服务器是阿里云北京地区 ECS，打开此开关可以提升文件上传速度。不符合要求的服务器请不要打开此开关，否则会出现无法上传的问题。</p><br><h2 id="阿里云盘分享" tabindex="-1"><a class="header-anchor" href="#阿里云盘分享"><span><strong>阿里云盘分享</strong></span></a></h2>',12)),t("p",null,[e[7]||(e[7]=o("已经无法使用，并且后续不再开发和维护分享存储方式，同时")),d(i,{to:"/zh/guide/drivers/aliyundrive_open.html"},{default:f(()=>e[6]||(e[6]=[t("strong",null,"阿里云盘Open",-1)])),_:1,__:[6]}),e[8]||(e[8]=o("获取的Token也不可以在阿里云盘分享挂载存储使用。"))]),e[12]||(e[12]=t("br",null,null,-1)),e[13]||(e[13]=t("h3",{id:"默认使用的下载方式",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#默认使用的下载方式"},[t("span",null,[t("strong",null,"默认使用的下载方式")])])],-1)),d(p,{id:"mermaid-69",code:"eJzT1dXlKsksyUm1Uni5e8aLdUue7N3/fMqK57Nank5e9Xx575Md3S/27n02befTPf3v98znAqlPy8kvT85ILCpRCHHiUgCC4pLKnFSFREOFtMycHCvlpKQ0neKSovzsVCvlNDMzKFu3PDOlJMPKqKBCJzk/J78IKJeWhqzdCKo9Lc3c1NwUboKxsTGqCSYFFRBtpUnpRYkFGQqZKamGCtEKsWDRREMwlZqXAuVGGxsYxVpZWRXn56Ym5yQWF9sCQQ3EszWJRtFA3z7r2P5i3b6nS9ohRoBVuaSmKcC1wFxmaQZRYBj9bM6aZ3N2Pdm9+PmEtlhdPaDelw2derp2WA1MMoyGqAwN8iGoODknMzkbFJhKenr6KUWZZalFxfrJ+bm5+Xl6GSW5OcrlqUkpiWW6z9dOez51qRKSniQy9CQTrQcAkHnb9A=="})])}}}),G=JSON.parse('{"path":"/zh/guide/drivers/aliyundrive.html","title":"阿里云盘 / 分享","lang":"zh-CN","frontmatter":{"icon":"iconfont icon-state","order":16,"category":["Guide"],"tag":["Storage","Guide","302"],"sticky":true,"star":true,"description":"阿里云盘 / 分享 注意 不推荐使用该驱动，因为它不稳定，随时可能被屏蔽，我们会在以后的版本中移除。推荐使用官方 API 的驱动 。 提示 由于阿里云盘 referer 的限制，必须使用移动端 token。 使用桌面 Web 令牌将导致无法下载和预览。 当然，如果你在本地使用或者带宽足够大，你也可以开启代理，让桌面 Web 的 refresh toke...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"阿里云盘 / 分享\\",\\"image\\":[\\"https://alist.nn.ci/img/drivers/aliyundrive.png\\"],\\"dateModified\\":\\"2025-04-23T16:39:23.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Andy Hsu\\",\\"url\\":\\"https://i.nn.ci\\"}]}"],["meta",{"property":"og:url","content":"https://alist.nn.ci/zh/guide/drivers/aliyundrive.html"}],["meta",{"property":"og:site_name","content":"AList文档"}],["meta",{"property":"og:title","content":"阿里云盘 / 分享"}],["meta",{"property":"og:description","content":"阿里云盘 / 分享 注意 不推荐使用该驱动，因为它不稳定，随时可能被屏蔽，我们会在以后的版本中移除。推荐使用官方 API 的驱动 。 提示 由于阿里云盘 referer 的限制，必须使用移动端 token。 使用桌面 Web 令牌将导致无法下载和预览。 当然，如果你在本地使用或者带宽足够大，你也可以开启代理，让桌面 Web 的 refresh toke..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://alist.nn.ci/img/drivers/aliyundrive.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:locale:alternate","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2025-04-23T16:39:23.000Z"}],["meta",{"property":"article:tag","content":"302"}],["meta",{"property":"article:tag","content":"Guide"}],["meta",{"property":"article:tag","content":"Storage"}],["meta",{"property":"article:modified_time","content":"2025-04-23T16:39:23.000Z"}],["link",{"rel":"alternate","hreflang":"en-us","href":"https://alist.nn.ci/guide/drivers/aliyundrive.html"}]]},"git":{"createdTime":1662556125000,"updatedTime":1745426363000,"contributors":[{"name":"Noah Hsu","username":"","email":"i@nn.ci","commits":8},{"name":"Chi_Tang","username":"","email":"chitang@duck.com","commits":1},{"name":"sheltonzhu","username":"sheltonzhu","email":"498220739@qq.com","commits":1,"url":"https://github.com/sheltonzhu"},{"name":"mengguyi","username":"mengguyi","email":"73788063+mengguyi@users.noreply.github.com","commits":1,"url":"https://github.com/mengguyi"},{"name":"anwen-anyi","username":"anwen-anyi","email":"56105412+anwen-anyi@users.noreply.github.com","commits":7,"url":"https://github.com/anwen-anyi"},{"name":"Wuxuan","username":"Wuxuan","email":"git@wangwuxuan.cn","commits":1,"url":"https://github.com/Wuxuan"},{"name":"Andy Hsu","username":"","email":"i@nn.ci","commits":4},{"name":"Patrick-Ze","username":"Patrick-Ze","email":"19711799+Patrick-Ze@users.noreply.github.com","commits":1,"url":"https://github.com/Patrick-Ze"},{"name":"安稳","username":"","email":"anwen_anyi@foxmail.com","commits":5},{"name":"anwen","username":"anwen","email":"anwen_anyi@foxmail.com","commits":1,"url":"https://github.com/anwen"}]},"readingTime":{"minutes":2.52,"words":756},"filePathRelative":"zh/guide/drivers/aliyundrive.md","autoDesc":true}');export{D as comp,G as data};
